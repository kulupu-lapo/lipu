---
import DarkModeToggle from "@/components/DarkModeToggle.astro";
import { translator, getLangFromUrl, urlLocaliser } from "@/utils/i18n.ts"
import { data } from "@/i18n/site.ts"
import LanguageSwitch from "./LanguageSwitch.astro";

const t = translator(data, getLangFromUrl(Astro.url))
const localUrl = urlLocaliser(Astro.url)
---
<style>
  header {
    position: relative;
    max-width: 850px;
    text-align: center;
    border-bottom: 5px dotted var(--accent);
    padding: 20px 0;
    margin: auto;
    margin-top: 10px;
    font-weight: 400;
  }
  img {
    max-width: 100%;
    max-height: 150px;
  }
  a:has(img) {
    display: block; /*fix focus styling on main header*/
  }
  a {
    text-decoration: none;
    /* color: var(--txt); */
  }
  .secondary a {
    font-weight: 500;
  }
</style>

<header>
  <a href={localUrl("/")}>
    <img alt="lipu.pona.la" src="./header.svg" />
  </a>
  <div style="font-weight: 700">
    <a href="https://wasona.com/" rel="index follow">{t('nav.wasona')}</a>{" · "}
    {t('nav.library')}{" · "}
    <a href="https://sin-kulupu.pona.la" rel="index follow">{t('nav.sinkulupu')}</a>{" · "}
    <a href="https://discord.gg/6zkugJFU4x" rel="index follow">{t('nav.mapona')}</a>{" · "}
    <a href="https://pona.la/" rel="index follow">{t('nav.ponala')}</a>
  </div>
  <div class="secondary">
    <a href={localUrl("/all")}>{t("nav.all")}</a>{" · "}
    <a href={localUrl("/collections")}>{t("nav.collections")}</a>{" · "}
    <a href={localUrl("/tags")}>{t("nav.tags")}</a>{" · "}
    <a href={localUrl("/authors")}>{t("nav.authors")}</a>{" · "}
    <a href={localUrl("/adaptations")}>{t("nav.adaptations")}</a>{" · "}
    <a href={localUrl("/random")} rel="nofollow">{t("nav.random")}</a>{" · "}
    <a href={localUrl("/add")}>{t("nav.add")}</a>
  </div>
  <DarkModeToggle />
  <LanguageSwitch />
</header>